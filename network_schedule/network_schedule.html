<!-- network_schedule.html -->
<!-- 18-649 Distributed Embedded Systems -->
<!-- Group 11 -->
<!-- Rahul Ramesh // rahulram. Daniel Santoro // ddsantor. David Thompson // davidtho. Jialiang Tan // jialiant -->
<!-- !@ -->

<!-- Initialization -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
  <title>18649 - Network Schedule</title>
</head>

<!-- Title -->
<body>
<h1 style="text-align: center;">18649 - Network Schedule<br></h1>
<hr style="width: 100%; height: 2px;"> 18649 Fall 2015<br>
Group 11 - Rahul Ramesh // rahulram. Daniel Santoro // ddsantor. David Thompson // davidtho. Jialiang Tan // jialiant.&nbsp; <br>
<hr style="width: 100%; height: 2px;">


<!-- CAN Message Dictionary -->
<h2>CAN Message Dictionary<br></h2>
The table below describes the current state of the Message Dictionary. The table 
is organized such that the highest priority messages manifest at the top of the table, 
and lower priority messages manifest at the bottom of the table. The messages that
are greyed out are messages that are no longer part of this implementation, but 
have been included for backward traceability. These messages all have a "Message ID"
of "FF" to note they are no longer used.<br>
<br>
For a more clear view of this table, see <a href="network_schedule.xls">network_schedule.xls</a>.
<br><br>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
	  <tr style="font-weight: bold;">
      <td style="vertical-align: top;">Sender Node Name<br></td>
      <td style="vertical-align: top;">Message Name<br></td>
      <td style="vertical-align: top;">Deadline (ms)<br></td>
      <td style="vertical-align: top;">Message ID<br></td>
      <td style="vertical-align: top;">Sender Node Type<br></td>
      <td style="vertical-align: top;">Replication Type<br></td>
      <td style="vertical-align: top;">Base Can ID<br></td>
    </tr>
  	<tr>
  		<td>DriveControl</td>
  		<td>DRIVE_SPEED</td>
  		<td>10</td>
  		<td>10</td>
  		<td>00</td>
  		<td>none</td>
  		<td>0x08100000</td>
  	</tr>
  	<tr>
  		<td>DoorControl</td>
  		<td>DOOR_MOTOR_COMMAND_BASE</td>
  		<td>10</td>
  		<td>20</td>
  		<td>10</td>
  		<td>hall, side</td>
  		<td>0x08201000</td>
  	</tr>
  	<tr>
  		<td>DoorReversal Sensor</td>
  		<td>DOOR_REVERSAL_SENSOR_BASE</td>
  		<td>10</td>
  		<td>30</td>
  		<td>20</td>
  		<td>hall, side</td>
  		<td>0x08302000</td>
  	</tr>
  	<tr>
  		<td>Level Sensor</td>
  		<td>LEVELING_BASE</td>
  		<td>10</td>
  		<td>40</td>
  		<td>30</td>
  		<td>floor, hall</td>
  		<td>0x08403000</td>
  	</tr>
  	<tr>
  		<td>Safety Sensor</td>
  		<td>EMERGENCY_BRAKE</td>
  		<td>50</td>
  		<td>50</td>
  		<td>40</td>
  		<td>none</td>
  		<td>0x08504000</td>
  	</tr>
  	<tr>
  		<td>Dispatcher</td>
  		<td>DESIRED_FLOOR</td>
  		<td>50</td>
  		<td>60</td>
  		<td>50</td>
  		<td>none</td>
  		<td>0x08605000</td>
  	</tr>
  	<tr>
  		<td>AtFloor Sensor</td>
  		<td>AT_FLOOR_BASE</td>
  		<td>50</td>
  		<td>70</td>
  		<td>60</td>
  		<td>floor, hall</td>
  		<td>0x08706000</td>
  	</tr>
  	<tr>
  		<td>CarLevelPosition Sensor</td>
  		<td>CAR_LEVEL_POSITION</td>
  		<td>50</td>
  		<td>80</td>
  		<td>70</td>
  		<td>none</td>
  		<td>0x08807000</td>
  	</tr>
  	<tr>
  		<td>DoorClosed Sensor</td>
  		<td>DOOR_CLOSED_SENSOR_BASE</td>
  		<td>100</td>
  		<td>90</td>
  		<td>80</td>
  		<td>hall, side</td>
  		<td>0x08908000</td>
  	</tr>
  	<tr>
  		<td>HallButtonControl</td>
  		<td>HALL_CALL_BASE</td>
  		<td>100</td>
  		<td>A0</td>
  		<td>90</td>
  		<td>floor, hall, direction</td>
  		<td>0x08A09000</td>
  	</tr>
  	<tr>
  		<td>CarButton Control</td>
  		<td>CAR_CALL_BASE</td>
  		<td>100</td>
  		<td>B0</td>
  		<td>A0</td>
  		<td>floor, hall</td>
  		<td>0x08B0A000</td>
  	</tr>
  	<tr>
  		<td>CarWeight Sensor</td>
  		<td>CAR_WEIGHT</td>
  		<td>200</td>
  		<td>C0</td>
  		<td>C0</td>
  		<td>none</td>
  		<td>0x08C0C000</td>
  	</tr>
  	<tr>
  		<td>DoorOpened Sensor</td>
  		<td>DOOR_OPEN_SENSOR_BASE</td>
  		<td>200</td>
  		<td>D0</td>
  		<td>B0</td>
  		<td>hall, side</td>
  		<td>0x08D0B000</td>
  	</tr>
  	<tr>
  		<td>CarWeight Sensor</td>
  		<td>CAR_WEIGHT_ALARM</td>
  		<td>200</td>
  		<td>E0</td>
  		<td>C0</td>
  		<td>none</td>
  		<td>0x08E0C000</td>
  	</tr>
  	<tr>
  		<td>HoistwayLimit Sensor</td>
  		<td>HOISTWAY_LIMIT_BASE</td>
  		<td>200</td>
  		<td>F0</td>
  		<td>D0</td>
  		<td>direction</td>
  		<td>0x08F0D000</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
    <td colspan="7" rowspan="1" style="vertical-align: top; text-align: center; font-weight: bold;">Unused messages<br></td>  	
   </tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>DriveControl</td>
  		<td>DRIVE_COMMAND</td>
  		<td>10</td>
  		<td>FF</td>
  		<td>00</td>
  		<td>none</td>
  		<td>0x08FF0000</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>CarPosition Control</td>
  		<td>CAR_POSITION</td>
  		<td>50</td>
  		<td>FF</td>
  		<td>E0</td>
  		<td>none</td>
  		<td>0x08FFE000</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>Dispatcher</td>
  		<td>DESIRED_DWELL_BASE</td>
  		<td>50</td>
  		<td>FF</td>
  		<td>50</td>
  		<td>none</td>
  		<td>0x08FF5000</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>CarButton Control</td>
  		<td>CAR_LIGHT_BASE</td>
  		<td>100</td>
  		<td>FF</td>
  		<td>A0</td>
  		<td>floor, hall</td>
  		<td>0x08FFA000</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>HallButtonControl</td>
  		<td>HALL_LIGHT_BASE</td>
  		<td>100</td>
  		<td>FF</td>
  		<td>90</td>
  		<td>floor, hall, direction</td>
  		<td>0x08FF9000</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>CarLantern Control</td>
  		<td>CAR_LANTERN_BASE</td>
  		<td>200</td>
  		<td>FF</td>
  		<td>F0</td>
  		<td>direction</td>
  		<td>0x08FFF000</td>
  	</tr>
  </tbody>
</table> 
<br>
<h2>Network Schedule Analaysis</h2>
<br>
Below is the network scheduleability analysis for this implementation of the Message Dictionary.
The table is organized such that the highest priority messages manifest at the top of the table, 
and lower priority messages manifest at the bottom of the table. The messages that
are greyed out are messages that are no longer part of this implementation, but 
have been included for backward traceability. The table is fully filled out for 
these messages except the for the final best/worst case bandwidth calculation.<br>
<br>
For a more clear view of this table, see <a href="network_schedule.xls">network_schedule.xls</a>.
<br><br>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
	  <tr style="font-weight: bold;">
  		<td>Sender Node Name</td>
  		<td>Message Name</td>
  		<td>Base CAN ID</td>
  		<td>Replication Count</td>
  		<td>Deadline (ms)</td>
  		<td>Desc</td>
  		<td>Type</td>
  		<td>Bit Len</td>
  		<td>Desc</td>
  		<td>Type</td>
  		<td>Bit Len</td>
  		<td>Desc</td>
  		<td>Type</td>
  		<td>Bit Len</td>
  		<td>Total Payload (bit)</td>
  		<td>Total Payload (byte)</td>
  		<td>Best Case Message Length (bit)</td>
  		<td>Worst Case Message Length (bit)</td>
  		<td>Best Case BW (bits/sec)</td>
  		<td>Worst Case BW (bits/sec)</td>
  	</tr>
	  <tr>
  		<td>DriveControl</td>
  		<td>DRIVE_SPEED</td>
  		<td>0x08100000</td>
  		<td>1</td>
  		<td>10</td>
  		<td>Speed</td>
  		<td>Short</td>
  		<td>16</td>
  		<td>Direction</td>
  		<td>byte</td>
  		<td>8</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>24</td>
  		<td>3</td>
  		<td>91</td>
  		<td>111</td>
  		<td>9100</td>
  		<td>11100</td>
  	</tr>
  	<tr>
  		<td>DoorControl</td>
  		<td>DOOR_MOTOR_COMMAND_BASE</td>
  		<td>0x08201000</td>
  		<td>4</td>
  		<td>10</td>
  		<td>DoorMotorCommand</td>
  		<td>Byte</td>
  		<td>8</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>8</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>30000</td>
  		<td>36400</td>
  	</tr>
  	<tr>
  		<td>DoorReversal Sensor</td>
  		<td>DOOR_REVERSAL_SENSOR_BASE</td>
  		<td>0x08302000</td>
  		<td>4</td>
  		<td>10</td>
  		<td>DoorReversal</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>30000</td>
  		<td>36400</td>
  	</tr>
  	<tr>
  		<td>Level Sensor</td>
  		<td>LEVELING_BASE</td>
  		<td>0x08403000</td>
  		<td>2</td>
  		<td>10</td>
  		<td>Level</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>15000</td>
  		<td>18200</td>
  	</tr>
  	<tr>
  		<td>Safety Sensor</td>
  		<td>EMERGENCY_BRAKE</td>
  		<td>0x08504000</td>
  		<td>1</td>
  		<td>50</td>
  		<td>Ebrake</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>1500</td>
  		<td>1820</td>
  	</tr>
  	<tr>
  		<td>Dispatcher</td>
  		<td>DESIRED_FLOOR</td>
  		<td>0x08605000</td>
  		<td>1</td>
  		<td>50</td>
  		<td>DesiredFloor</td>
  		<td>Byte</td>
  		<td>8</td>
  		<td>DesiredHallway</td>
  		<td>Enum (Hallway)</td>
  		<td>8</td>
  		<td>DesiredDirection</td>
  		<td>Enum (Direction)</td>
  		<td>8</td>
  		<td>24</td>
  		<td>3</td>
  		<td>91</td>
  		<td>111</td>
  		<td>1820</td>
  		<td>2220</td>
  	</tr>
  	<tr>
  		<td>AtFloor Sensor</td>
  		<td>AT_FLOOR_BASE</td>
  		<td>0x08706000</td>
  		<td>10</td>
  		<td>50</td>
  		<td>AtFloor</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>15000</td>
  		<td>18200</td>
  	</tr>
  	<tr>
  		<td>CarLevelPosition Sensor</td>
  		<td>CAR_LEVEL_POSITION</td>
  		<td>0x08807000</td>
  		<td>1</td>
  		<td>50</td>
  		<td>Position</td>
  		<td>Integer</td>
  		<td>32</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>32</td>
  		<td>4</td>
  		<td>99</td>
  		<td>121</td>
  		<td>1980</td>
  		<td>2420</td>
  	</tr>
  	<tr>
  		<td>DoorClosed Sensor</td>
  		<td>DOOR_CLOSED_SENSOR_BASE</td>
  		<td>0x08908000</td>
  		<td>4</td>
  		<td>100</td>
  		<td>DoorClosed</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>3000</td>
  		<td>3640</td>
  	</tr>
  	<tr>
  		<td>HallButtonControl</td>
  		<td>HALL_CALL_BASE</td>
  		<td>0x08A09000</td>
  		<td>17</td>
  		<td>100</td>
  		<td>HallCall</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>12750</td>
  		<td>15470</td>
  	</tr>
  	<tr>
  		<td>CarButton Control</td>
  		<td>CAR_CALL_BASE</td>
  		<td>0x08B0A000</td>
  		<td>10</td>
  		<td>100</td>
  		<td>CarCall</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>7500</td>
  		<td>9100</td>
  	</tr>
  	<tr>
  		<td>CarWeight Sensor</td>
  		<td>CAR_WEIGHT</td>
  		<td>0x08C0C000</td>
  		<td>1</td>
  		<td>200</td>
  		<td>Alarm</td>
  		<td>Alarm</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>375</td>
  		<td>455</td>
  	</tr>
  	<tr>
  		<td>DoorOpened Sensor</td>
  		<td>DOOR_OPEN_SENSOR_BASE</td>
  		<td>0x08D0B000</td>
  		<td>4</td>
  		<td>200</td>
  		<td>DoorOpened</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>1500</td>
  		<td>1820</td>
  	</tr>
  	<tr>
  		<td>CarWeight Sensor</td>
  		<td>CAR_WEIGHT_ALARM</td>
  		<td>0x08E0C000</td>
  		<td>1</td>
  		<td>200</td>
  		<td>CarWeight</td>
  		<td>Integer</td>
  		<td>32</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>32</td>
  		<td>4</td>
  		<td>99</td>
  		<td>121</td>
  		<td>495</td>
  		<td>605</td>
  	</tr>
  	<tr>
  		<td>HoistwayLimit Sensor</td>
  		<td>HOISTWAY_LIMIT_BASE</td>
  		<td>0x08F0D000</td>
  		<td>2</td>
  		<td>200</td>
  		<td>HoistwayLimit</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>750</td>
  		<td>910</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>DriveControl</td>
  		<td>DRIVE_COMMAND</td>
  		<td>0x08FF0000</td>
  		<td>1</td>
  		<td>10</td>
  		<td>Drive Command</td>
  		<td>Byte</td>
  		<td>8</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>8</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>0</td>
  		<td>0</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>CarPosition Control</td>
  		<td>CAR_POSITION</td>
  		<td>0x08FFE000</td>
  		<td>1</td>
  		<td>50</td>
  		<td>Floor</td>
  		<td>Byte</td>
  		<td>8</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>8</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>0</td>
  		<td>0</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>Dispatcher</td>
  		<td>DESIRED_DWELL_BASE</td>
  		<td>0x08FF5000</td>
  		<td>2</td>
  		<td>50</td>
  		<td>Dwell time</td>
  		<td>Byte</td>
  		<td>8</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>8</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>0</td>
  		<td>0</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>CarButton Control</td>
  		<td>CAR_LIGHT_BASE</td>
  		<td>0x08FFA000</td>
  		<td>10</td>
  		<td>100</td>
  		<td>CarLight</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>0</td>
  		<td>0</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>HallButtonControl</td>
  		<td>HALL_LIGHT_BASE</td>
  		<td>0x08FF9000</td>
  		<td>17</td>
  		<td>100</td>
  		<td>HallLight</td>
  		<td>Boolean</td>
  		<td>1</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>1</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>0</td>
  		<td>0</td>
  	</tr>
  	<tr style="background-color: rgb(200, 200, 200);">
  		<td>CarLantern Control</td>
  		<td>CAR_LANTERN_BASE</td>
  		<td>0x08FFF000</td>
  		<td>2</td>
  		<td>200</td>
  		<td>Lantern</td>
  		<td>Byte</td>
  		<td>8</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>N/A</td>
  		<td>8</td>
  		<td>1</td>
  		<td>75</td>
  		<td>91</td>
  		<td>0</td>
  		<td>0</td>
  	</tr>
   <tr>
    <td colspan="18" rowspan="1" style="vertical-align: top; text-align: right; font-weight: bold;">Total BW:<br></td>  	
  		<td>130770</td>
  		<td>158760</td>
   </tr>
  </tbody>
</table>

<br>
<h2>Simulation Analysis</h2>
<br>
As shown above, the best case bandwidth for this CAN network optimization is <b>130,770 bits/sec</b>. 
Achieving this bandwidth, however is unreasonable due to the CAN standard which "bit stuffs" as
a method of error detection. Thus, the more important metric is the worst case bandwith, which is
<b>158,760 bits/sec</b> Considering a given maximum CAN network bandwidth of <b>200,000 bits/sec</b>
these calculations suggest that this implementation should utilize between <b>65.3%</b> and <b>79.4%</b> of the 
network bandwidth.
<br><br>
In simulation, the calculated utilization of the network bandwith proved to be accurate as <b>70.22%</b>
of the bandwidth was consistently utilized. Thus, in reality, this implementation used approximately
<b>140,440 bits/sec</b>. The results of these tests can be seen in the 
<a href="../acceptance_test/acceptance_test_log.html">Acceptance Test Log</a>. 
Though no deviation was seen through this testing, it can be assumed that deviation can occur
due to faults, dropped messages, and changes in bit stuffing due to different valued payloads.
<br><br>
Note: For information, these simulation were run with a bandwidth of <b>160,000 bits/sec</b> 
(close to the theoretical worst case bandwidth) and had no network scheduleability issues in practice.
</body>
</html>
